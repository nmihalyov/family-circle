"use strict";window.onload=function(){var t=function(t){var e=!0;return t.map((function(t,n){return""===n.value&&(e=!1)})),e};$(".js-add-item").on("click",(function(t){t.preventDefault()})),$(".js-tag").on("click",(function(){$(this).toggleClass("tags__item--selected")})),$(".js-cart-add").on("click",(function(t){t.preventDefault(),$(this).hide(0),$(this).parent().find(".js-cart-remove").show(0)})),$(".js-cart-remove").on("click",(function(t){t.preventDefault(),$(this).hide(0),$(this).parent().find(".js-cart-add").show(0)})),$(".js-sorting-type").on("click",(function(){$(".sorting__type-item--current").removeClass("sorting__type-item--current"),$(this).addClass("sorting__type-item--current")})),$(".js-filter").on("click",(function(){$(this).toggleClass("filters__item-head--active").parent().find(".filters__item-content").slideToggle(300)})),$(".js-more").on("click",(function(t){t.preventDefault(),$(this).hide().parent().find(".filters__item-unit--hidden").removeClass("filters__item-unit--hidden")}));var e={swipe:!1,prevArrow:'<button class="popup__item-slider-arrow popup__item-slider-arrow--prev"></button>',nextArrow:'<button class="popup__item-slider-arrow popup__item-slider-arrow--next"></button>',dots:!0,dotsClass:"popup__item-slider-dots",customPaging:function(){return""}},n=0,s=function(t,e){if(!$(t.target).closest(".popup__window").length||!e.hasClass("js-popup")){$("body").css({position:"static",marginTop:"0"}),window.scrollTo(0,n),e.closest(".js-popup").hide(0);var s=e.find(".js-popup-slider");s.length&&s.slick("unslick")}},a=function(t){n=window.scrollY,$("body").css({position:"fixed",marginTop:"".concat(-n,"px")}),t.fadeIn(300);var s=t.find(".js-popup-slider");s.length&&!s.hasClass("slick-initialized")&&s.slick(e)};$("body").on("click",".js-open-popup",(function(){var t=$(this).attr("data-popup"),e=$('.js-popup[data-popup="'.concat(t,'"]'));a(e)})),$(".js-close-popup").on("click",(function(t){s(t,$(this))})),$(".js-feedback-send").on("click",(function(e){var n=$(this),a=n.parent().find("input[required], textarea[required]");t(a)&&(e.preventDefault(),s(e,n),a.val(""),$(".js-feedback-star").removeClass(r).addClass(i),$(".js-feedback-eval").hide(0))}));var r="popup__feedback-rating-star--full",i="popup__feedback-rating-star--empty",o=["ужасно","очень плохо","плохо","хорошо","отлично"];$(".js-feedback-star").on("mouseenter",(function(){var t=$(this);t.removeClass(i),t.prevAll().removeClass(i),t.addClass(r),t.prevAll().addClass(r),t.nextAll().removeClass(r),t.nextAll().addClass(i)})),$(".js-feedback-star").on("click",(function(){var t=$(this),e=t.attr("data-rating");t.parent().attr("data-rating",e),$(".js-feedback-eval").show(0).find("span").text(o[e-1])})),$(".js-feedback-star").on("mouseleave",(function(){var t=$(this).parent().attr("data-rating");$(".js-feedback-star").map((function(){+$(this).attr("data-rating")<=+t?($(this).removeClass(i),$(this).addClass(r)):($(this).removeClass(r),$(this).addClass(i))}))})),$(".js-tab").on("click",(function(t){t.preventDefault();var e=$(this);$(".tabs__item--active").removeClass("tabs__item--active"),e.addClass("tabs__item--active"),$(".js-tab-content").hide(0),e.parent().parent().find('.js-tab-content[data-tab="'.concat(e.attr("data-tab"),'"]')).fadeIn(300)}));var c=function(t,e){return e.val(+e.val()+t).trigger("change")};$(".js-amount-remove").on("click",(function(t){t.preventDefault();var e=$(this).parent().find(".js-amount-value");1!=+e.val()&&c(-1,e)})),$(".js-amount-add").on("click",(function(t){t.preventDefault();var e=$(this).parent().find(".js-amount-value");c(1,e)})),$(".js-radio").on("click",(function(){var t=$(this),e=t.find("input").attr("name");$('.radio__input[name="'.concat(e,'"]')).parent().removeClass("radio--checked"),t.addClass("radio--checked")})),$(".js-dropdown-button").on("click",(function(t){t.preventDefault(),$(".js-dropdown-menu").not($(this).next(".js-dropdown-menu")).slideUp(300),$(this).next(".js-dropdown-menu").slideToggle(300)})),$(document).on("click",(function(t){$(t.target).closest(".js-dropdown-container").length||$(".js-dropdown-menu").slideUp(300)})),$(".js-header-search").on("focus",(function(){$(this).next(".js-header-search-hint").slideDown(300)})),$(document).on("click",(function(t){$(t.target).closest(".header__search-label").length||$(".js-header-search-hint").slideUp(300)})),$(".js-banner-slider").slick({dots:!0,swipe:!1,prevArrow:'<button class="banner__arrow banner__arrow--prev"></button>',nextArrow:'<button class="banner__arrow banner__arrow--next"></button>',dotsClass:"banner__dots",customPaging:function(){return""}}),$(".js-hits-slider").slick({infinite:!0,slidesToShow:4,swipeToSlide:!0,prevArrow:'<button class="hits__arrow hits__arrow--prev"></button>',nextArrow:'<button class="hits__arrow hits__arrow--next"></button>',appendArrows:".hits__slider"}),$(".js-item-slider").slick({swipe:!1,prevArrow:'<button class="item__slider-arrow item__slider-arrow--prev"></button>',nextArrow:'<button class="item__slider-arrow item__slider-arrow--next"></button>',dots:!0,dotsClass:"item__slider-dots",customPaging:function(){return""}}),$(".js-item-option").on("click",(function(){var t=$(this);$(".item__option--current").removeClass("item__option--current"),t.addClass("item__option--current"),$(".item__price--current").removeClass("item__price--current"),$('.js-price[data-option="'.concat(t.attr("data-option"),'"]')).addClass("item__price--current")}));var d=$(".js-query-amount"),l=d.length&&JSON.parse(d.attr("data-set")),u=0,p=0,f=function(){$(".js-cart-item").each((function(t,e){var n=+$(e).find(".js-cart-amount").val(),s=+$(e).find(".radio--checked input").val();u+=n,p+=n*s})),$(".js-cart-total, .js-query-sum").text(p.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")),d.text(l.decline(u,!0)),u=0,p=0};$(".js-cart-item").length&&f(),$(".js-cart-amount").on("change",f),$(".js-cart-radio").on("change",f),$(".js-cart-del").on("click",(function(){var t=$(this).closest(".js-cart-item");t.fadeOut(500),setTimeout((function(){t.remove(),f()}),500)})),$(".js-query-send").on("click",(function(e){var n=$(this),r=$('.js-popup[data-popup="success"]'),i=n.parent().find("input[required], textarea[required]");t(i)&&(e.preventDefault(),s(e,n),i.val(""),a(r))}))};